(this.webpackJsonpcanvas=this.webpackJsonpcanvas||[]).push([[0],{15:function(t,n,e){},17:function(t,n,e){},19:function(t,n,e){"use strict";e.r(n);var c=e(0),o=e.n(c),a=e(7),i=e.n(a),r=(e(15),e(10)),u=e(2),s=e(4),l=e(8),b=e.n(l),f=e(9),h=(e(17),e(1));function j(t){return t*t}function x(t,n){return j(t.x-n.x)+j(t.y-n.y)}var y=function(){var t=Object(c.useState)({}),n=Object(s.a)(t,2),e=n[0],o=n[1],a=Object(c.useState)([]),i=Object(s.a)(a,2),l=i[0],j=i[1],y=Object(c.useState)([]),d=Object(s.a)(y,2),O=d[0],v=d[1],g=Object(c.useState)([]),k=Object(s.a)(g,2),p=k[0],C=k[1],w=Object(c.useRef)(null);Object(f.a)("keydown",(function(t){27===t.keyCode&&(C([].concat(Object(u.a)(p),[O])),v([]),j([]))})),b()((function(){if(w.current){var t=w.current,n=t.getContext("2d");n.clearRect(0,0,t.width,t.height);var c=function(t){n.beginPath(),n.moveTo(t[0].x,t[0].y),n.lineTo(t[1].x,t[1].y),n.stroke()};p.forEach((function(t){t.forEach(c)})),O.forEach(c);var o=Object(u.a)(l).pop()||{};o.x&&o.y&&e.x&&e.y&&(n.beginPath(),n.moveTo(o.x,o.y),n.lineTo(e.x,e.y),n.stroke())}}),[O,w.current,e,l]);var M=Object(c.useCallback)((function(){var t=[].concat(Object(u.a)(l),[e]);2===t.length?(v([].concat(Object(u.a)(O),[t])),j([e])):j(t)}),[O,e,l]),m=Object(c.useCallback)((function(t){var n={x:t.clientX,y:t.clientY},e=[].concat(Object(u.a)(p.flat()),Object(u.a)(O.slice(0,-1))),c=[];if(e.length){var a=[];e.forEach((function(t){a.push(Object(r.a)({line:t},function(t,n,e){var c=x(n,e);if(0===c)return{distance:x(t,n),x:n.x,y:n.y};var o=((t.x-n.x)*(e.x-n.x)+(t.y-n.y)*(e.y-n.y))/c;o=Math.max(0,Math.min(1,o));var a=n.x+o*(e.x-n.x),i=n.y+o*(e.y-n.y);return{distance:Math.sqrt(x(t,{x:a,y:i})),x:a,y:i}}(n,t[0],t[1])))})),c=a.filter((function(t){return t.distance<30}))}var i=c.sort((function(t,n){return n.distance-t.distance}));i.length?o({x:i[0].x,y:i[0].y}):o(n)}),[p,O]);return Object(h.jsxs)("div",{children:[Object(h.jsx)("canvas",{ref:w,width:window.innerWidth,height:window.innerHeight,style:{backgroundColor:"#ddd"},onClick:M,onMouseMove:m}),Object(h.jsx)("button",{onClick:function(){return console.log({currentMousePosition:e,linePoints:l,positions:O,polylines:p})},children:"clicky"})]})},d=function(t){t&&t instanceof Function&&e.e(3).then(e.bind(null,20)).then((function(n){var e=n.getCLS,c=n.getFID,o=n.getFCP,a=n.getLCP,i=n.getTTFB;e(t),c(t),o(t),a(t),i(t)}))};i.a.render(Object(h.jsx)(o.a.StrictMode,{children:Object(h.jsx)(y,{})}),document.getElementById("root")),d()}},[[19,1,2]]]);
//# sourceMappingURL=main.4639e2f0.chunk.js.map